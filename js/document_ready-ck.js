// codescript code to concatenate all js files and reduce http requests
// parameters
function getURLParameter(e){var t=new RegExp(e+"="+"(.+?)(&|$)"),n=decodeURI((t.exec(location.search)||[,null])[1]);return n}function getDesiredWidth(){var e=$(window).width(),t=e%unitTotalWidth,n=e-t;n>unitTotalWidth*5&&(n=unitTotalWidth*5);return n}function getColumnNumbers(){var e=getDesiredWidth(),t=e/unitTotalWidth;t>5&&(t=5);return t}function fixDimensions(){var e=getDesiredWidth();$("#content_wrapper").width(e);$("#channels_bar").width(e);var t=getColumnNumbers();$("#content_wrapper").BlocksIt({numOfCol:t,offsetX:unitMargin,offsetY:unitMargin,blockElement:".content_module"});var n=0,r=$("#channels_bar li");r.each(function(){$(this).is(":visible")&&(n+=$(this).width())});n+=r.size()*40;$("#channels_bar ul").css("width",n+"px");$("#channels_bar ul").css("margin","0 auto")}function do_scroll_math(){var e=$(window).height(),t=$(document).height(),n=$(document).scrollTop(),r=getURLParameter("channel");if(n>=t-e-1e3&&workInProgress==="no"){workInProgress="yes";var i="show_more_posts.php";$.post(i,{start_from:position,channel:r},function(e){$("#content_wrapper").append(e);fixDimensions();$(".content_module").fadeTo("slow",1);position+=14;$(document).scrollTop=n;$("img.lazy").lazyload({effect:"fadeIn",threshold:500});$("img.lazy").removeClass("lazy");workInProgress="no"})}}function prepareChannelBar(){var e=$("#selector").width(),t=20,n=0,r=1;$("#channels_bar li").each(function(i){console.log("barWidth: "+e);console.log("widthOfList: "+n);console.log($(this).text());if(n+$("#more").width()+t*2>e){$(this).addClass("bar_hide");console.log("overflower")}else{n=n+$(this).width()+t;r++}})}var padding=10,border=1,content=278,unitWidth=content+border*2+padding*2,unitMargin=10,unitTotalWidth=unitWidth+2*unitMargin,workInProgress="no",position=16;$("#whichchannel").change(function(){$(this).val()!==""&&(window.location.href=$(this).val())});$("#menubutton").mouseup(function(){$("ul.nav").toggle();$(".navbutton").toggleClass("highlighted")});$(document).keyup(function(e){if(e.keyCode===27){$("ul.nav").hide("fast");$(".navbutton").removeClass("highlighted")}});$(document).ready(function(){fixDimensions();$("#channels_bar .content_module").fadeTo("fast",1);$("#content_wrapper").waitForImages(function(){$(".loader").fadeTo("fast",0);$(".content_module").fadeTo("slow",1)});do_scroll_math();$(".content_module").css("display","block");$("img.lazy").lazyload({effect:"fadeIn",threshold:500});$("img.lazy").removeClass("lazy");prepareChannelBar()});var do_scroll_it;$(window).scroll(function(){clearTimeout(do_scroll_it);do_scroll_it=setTimeout(function(){do_scroll_math()},100)});var do_resize_it;$(window).resize(function(){clearTimeout(do_resize_it);do_resize_it=setTimeout(function(){fixDimensions()},100)});