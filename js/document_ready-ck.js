// codescript code to concatenate all js files and reduce http requests
// parameters
function getURLParameter(e){var t=new RegExp(e+"="+"(.+?)(&|$)"),n=decodeURI((t.exec(location.search)||[,null])[1]);return n}function getDesiredWidth(){var e=$(window).width(),t=e%unitTotalWidth,n=e-t;n>unitTotalWidth*5&&(n=unitTotalWidth*5);return n}function getColumnNumbers(){var e=getDesiredWidth(),t=e/unitTotalWidth;t>5&&(t=5);return t}function fixDimensions(){var e=getDesiredWidth();$("#content_wrapper").width(e);$("#channels_bar").width(e);var t=getColumnNumbers();$("#content_wrapper").BlocksIt({numOfCol:t,offsetX:unitMargin,offsetY:unitMargin,blockElement:".content_module"});var n=0,r=$("#channels_bar li");r.each(function(){$(this).is(":visible")&&(n+=$(this).width())});n+=r.size()*40;$("#channels_bar ul").css("width",n+"px");$("#channels_bar ul").css("margin","0 auto")}function adjustChannelBar(){var e=$("#selector").width(),t=26,n=0,r=1;$("#channels_bar ul").width(e-2*t);$("#channels_bar li").css("margin-right",t+"px");$("#channels_bar li").each(function(){n=n+$(this).width()+t;if(n+$("#more").width()+t*3>e){$(this).hide();n=n-$(this).width()-t}else{$(this).show();r++}});$("#more").show();n=n-$("#more").width()+t;console.log(n);var i=0;$("#channels_bar li").each(function(){$(this).is(":visible")&&(i=i+$(this).width()+t)});i-=t;console.log(i);$("#channels_bar ul").css({width:i+t,padding:"0",margin:"0 auto"});console.log($("#top_posts .content_module_header").css("background-color"));$("#channels_bar li.selected").css({"border-bottom":"3px solid "+$("#top_posts .content_module_header").css("background-color")})}function do_scroll_math(){var e=$(window).height(),t=$(document).height(),n=$(document).scrollTop(),r=getURLParameter("channel");if(n>=t-e-1e3&&workInProgress==="no"){workInProgress="yes";var i="show_more_posts.php";$.post(i,{start_from:position,channel:r},function(e){$("#content_wrapper").append(e);fixDimensions();adjustChannelBar();$(".content_module").fadeTo("slow",1);position+=14;$(document).scrollTop=n;$("img.lazy").lazyload({effect:"fadeIn",threshold:500});$("img.lazy").removeClass("lazy");workInProgress="no"})}}var padding=10,border=1,content=278,unitWidth=content+border*2+padding*2,unitMargin=10,unitTotalWidth=unitWidth+2*unitMargin,workInProgress="no",position=16;$("#menubutton").mouseup(function(){$("ul.nav").toggle();$(".navbutton").toggleClass("highlighted")});$(document).keyup(function(e){if(e.keyCode===27){$("ul.nav").hide("fast");$(".navbutton").removeClass("highlighted")}});$("#more").click(function(){$("#channels_window").toggle();$("#channels_window").css("right","5%");$("#channels_window").css("top","130px");$(document).keyup(function(e){e.keyCode===27&&$("#channels_window").hide()})});$("i.top-right").click(function(){$("#channels_window").hide()});$(document).ready(function(){fixDimensions();$("#channels_bar .content_module").fadeTo("fast",1);$("#content_wrapper").waitForImages(function(){$(".loader").fadeTo("fast",0);$(".content_module").fadeTo("slow",1)});do_scroll_math();adjustChannelBar();$(".content_module").css("display","block");$("img.lazy").lazyload({effect:"fadeIn",threshold:500});$("img.lazy").removeClass("lazy")});var do_scroll_it;$(window).scroll(function(){clearTimeout(do_scroll_it);do_scroll_it=setTimeout(function(){do_scroll_math()},100)});var do_resize_it;$(window).resize(function(){clearTimeout(do_resize_it);do_resize_it=setTimeout(function(){fixDimensions();adjustChannelBar()},100)});